<html>
<head>
    <meta charset="utf-8">
    <title>Cerberus C2</title>
    <meta name="author" content="Matthew Toussain">
    <meta name="Description" content="A framework for modular C2.">
    <link rel="sitemap" type="application/xml" title="Sitemap" href="">
    <link rel="shortcut icon" href="favicon.ico">
    <script src="gui/js/jquery-1.7.1.min.js"></script>
    <script src="gui/js/jquery.mousewheel-min.js"></script>
    <script src="gui/js/jquery.terminal-min.js"></script>
    <link href="gui/css/jquery.terminal.css" rel="stylesheet">
    <link href="gui/css/style.css" rel="stylesheet">
    <link rel='stylesheet' href='gui/css/fonts.css' type='text/css'/>
  </head>


<body>

<!-- Navigation Pane --> 
<div id = "topnav">
   <div id = "nav_cont">
      <div id = "logo"><a href = "/"><img height = "50" width = "50" src = "gui/images/favicon.png"></a></div>
         <div id = "navbar_cont">
            <div id = "nav_status">
Welcome to Cerberus. A modular framework for remote command and control.
            </div>
         </div>
         <div id = "panel_menu">
            <a href="#" class = "panel_icons"><span class='icon-remove'></span></a>&nbsp;&nbsp;&nbsp;
            <a href="/configure/" class = "panel_icons"><span class='icon-shield'></span></a>&nbsp;&nbsp;&nbsp;
            <a href="#" class = "panel_icons"><span class='icon-share'></span></a>&nbsp;&nbsp;&nbsp;
            <a href = "/configure/" class = "panel_icons"><span class='icon-cog'></span></a>&nbsp;&nbsp;&nbsp;
         </div>
   </div>
   <!--
   <div id = "navbar">
      <div id = "navbar_cont">
         <a href = "/" class = "navbar">Dashboard</a>
         <a href = "/configure/" class = "navbar">Alerts</a>
         <a href = "/agents/" class = "navbar">Agents</a>
         <a href = "/appstore/" class = "navbar">Appstore</a>
      </div>
   </div>
   -->
</div>


<div id = "maincont">
<div id = "dashboardcont">
   
   <!-- LEFT PANE -->
   
   <div id = "grid100">
      <div id = "top_widget">

            <table width = "100%">
               <tr class = "dash-stats">
                  <td width = "25%"><span class = "alertbytype">10</span><br>Active</td>
                  <td width = "25%"><span class = "alertbytype">0</span><br>Online</td>
                  <td width = "25%"><span class = "alertbytype">5</span><br>Pending</td>
                  <td width = "25%"><span class = "alertbytype">25</span><br>Deployed</td>
               </tr>
            </table>

      </div>
   </div>
   
   
   <!-- RIGHT PANE 
   <div id = "grid50">
      <div id = "main_widget">
         <div id = "widgetbar"><div id = "widget_header">Agent Statistics</div></div>
         <div id = "widgetcont">

         </div>
      </div>
   </div>

   -->
   <!-- Agent Table -->
   
   <div id = "grid100" style = "float: left">
      <div id = "main_widget">
         <div id = "widgetbar"><div id = "widget_header">Agents</div></div>
         <div id = "widgetcont">
            <table id = "table1" class="widget_list">
            <tr class = "widget_bar">
            <td>Host</td>
            <td>Context</td>
            <td>Description</td>
            <td>Status</td>
            </tr>
                    <tr class = "widgetrowa">
                        <td width = "30%">{{ profile.alias }}</td>
                        <td width = "30%">{{ profile.host }}</td>
                        <td width = "30%">{{ profile.system }}</td>
                        <td width = "10%">Online</td>
                    </tr>
                    <tr class = "widgetrowb">
                        <td width = "30%">{{ profile.alias }}</td>
                        <td width = "30%">{{ profile.host }}</td>
                        <td width = "30%">{{ profile.system }}</td>
                        <td width = "10%">Online</td>
                    </tr>
                    <tr class = "widgetrowa">
                        <td width = "30%">{{ profile.alias }}</td>
                        <td width = "30%">{{ profile.host }}</td>
                        <td width = "30%">{{ profile.system }}</td>
                        <td width = "10%">Online</td>
                    </tr>
                    <tr class = "widgetrowb">
                        <td width = "30%">{{ profile.alias }}</td>
                        <td width = "30%">{{ profile.host }}</td>
                        <td width = "30%">{{ profile.system }}</td>
                        <td width = "10%">Online</td>
                    </tr>
                    <tr class = "widgetrowa">
                        <td width = "30%">{{ profile.alias }}</td>
                        <td width = "30%">{{ profile.host }}</td>
                        <td width = "30%">{{ profile.system }}</td>
                        <td width = "10%">Online</td>
                    </tr>
                    <tr class = "widgetrowb">
                        <td width = "30%">{{ profile.alias }}</td>
                        <td width = "30%">{{ profile.host }}</td>
                        <td width = "30%">{{ profile.system }}</td>
                        <td width = "10%">Online</td>
                    </tr>
                    <tr class = "widgetrowa">
                        <td width = "30%">{{ profile.alias }}</td>
                        <td width = "30%">{{ profile.host }}</td>
                        <td width = "30%">{{ profile.system }}</td>
                        <td width = "10%">Online</td>
                    </tr>
                    <tr class = "widgetrowb">
                        <td width = "30%">{{ profile.alias }}</td>
                        <td width = "30%">{{ profile.host }}</td>
                        <td width = "30%">{{ profile.system }}</td>
                        <td width = "10%">Online</td>
                    </tr>
                    <tr class = "widgetrowa">
                        <td width = "30%">{{ profile.alias }}</td>
                        <td width = "30%">{{ profile.host }}</td>
                        <td width = "30%">{{ profile.system }}</td>
                        <td width = "10%">Online</td>
                    </tr>
            </table>
         </div>
      </div>
   </div>

</div>
</div>
<div style = "margin-bottom:40px"></div>

<script>
jQuery(document).ready(function($) {
    var id = 1;
    $('body').terminal(function(command, term) {
        if (command == 'help') {
            term.echo("available commands are mysql, js, test");
        } else if (command == 'test'){
            term.push(function(command, term) {
                if (command == 'help') {
                    term.echo('if you type ping it will display pong');
                } else if (command == 'ping') {
                    term.echo('pong');
                } else {
                    term.echo('unknown command ' + command);
                }
            }, {
                prompt: 'test> ',
                name: 'test'});
        } else if (command == "js") {
            term.push(function(command, term) {
                var result = window.eval(command);
                if (result != undefined) {
                    term.echo(String(result));
                }
            }, {
                name: 'js',
                prompt: 'js> '});
        } else if (command == 'mysql') {
            term.push(function(command, term) {
                term.pause();
                $.jrpc("mysql-rpc-demo.php",
                       id++,
                       "query",
                       [command],
                       function(data) {
                           term.resume();
                           if (data.error) {
                               term.error(data.error.message);
                           } else {
                               if (typeof data.result == 'boolean') {
                                   term.echo(data.result ? 'success' : 'fail');
                               } else {
                                   var len = data.result.length;
                                   for(var i=0;i<len; ++i) {
                                       term.echo(data.result[i].join(' | '));
                                   }
                               }
                           }
                       },
                       function(xhr, status, error) {
                           term.error('[AJAX] ' + status +
                                      ' - Server reponse is: \n' +
                                      xhr.responseText);
                           term.resume();
                       });
            }, {
                greetings: "This is example of using mysql from terminal\n\
you are allowed to execute: select, insert, update and delete from/to table:\n\
    table test(integer_value integer, varchar_value varchar(255))",
                prompt: "mysql> "});
        } else {
            //term.echo("unknown command " + command);
            postCommand(command);
        }
    }, {
        greetings: "Cerberus Command Center",
	prompt: "cerberus> ",
        onBlur: function() {
            // prevent loosing focus
            return false;
        }
    });
});

</script>

<script>
function postCommand(command)
{
//Get target details from cookie and submit to hostCtrl

}

function getCheckin()
{
//on interval check to see if agent has checked in and and print cmd responses to screen.
var lastCheck = getElementById("lastCheck").innerHTML;
var currTime = 0;

   if (lastCheck > currTime)
   {
      document.getElementById("termout").innerHTML += '<div><div style="width: 100%;">Yay!</div</div>';
   }
}



//Auto Refresh Loads
var pLoadRate = "1000";
var auto_refresh = setInterval(
function ()
{
$('#CheckIn').load('gui/termUpdater.htm').fadeIn("slow");

}, pLoadRate);

</script>

<!-- JS Updater -->

<script>
//Auto Refresh Loads
var pLoadRate = "1000";
var auto_refresh = setInterval(
function ()
{
$('#CheckIn').load('gui/termUpdater.htm').fadeIn("slow");

}, pLoadRate);

</script>

<div id = "CheckIn"></div>

<!-- JS VARs -->

<div id = "lastCheck" style = "display: none">1</div>



<!-- Terminal Setup -->
<script>
$( document ).ready(function() {
  document.getElementById('termcont').appendChild(
    document.getElementById('termout')
  );
  document.getElementById('termcont').appendChild(
    document.getElementById('cmdprompt')
  );
});

</script>

<div id = "termcont"></div>

</body>
</html>
